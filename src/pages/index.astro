---
import PageLayout from '../layouts/PageLayout.astro';
import Hero from '../components/sections/Hero.astro';
import Section from '../components/sections/Section.astro';
import SplitContent from '../components/sections/SplitContent.astro';
import CTABanner from '../components/sections/CTABanner.astro';
import Card from '../components/ui/Card.astro';
import Badge from '../components/ui/Badge.astro';
import Button from '../components/ui/Button.astro';
import ScrollReveal from '../components/animation/ScrollReveal.astro';
import CountUp from '../components/animation/CountUp.astro';
import { generateOrganizationSchema } from '../lib/seo';
---

<PageLayout
  title="Master the Infinite Banking Concept"
  description="Free education that transforms how you think about money, banking, and generational wealth. Learn the Infinite Banking Concept through structured courses, interactive tools, and expert guidance."
>
  <!-- 1. Hero Section -->
  <Hero
    title="Master the Infinite Banking Concept"
    subtitle="Free education that transforms how you think about money, banking, and generational wealth."
    primaryCta={{ text: "Start Here — It's Free", href: "/learn/start-here" }}
    secondaryCta={{ text: "Watch Intro Video", href: "#what-is-ibc" }}
  />

  <!-- 2. Social Proof Bar -->
  <Section background="cream">
    <div class="stats-grid">
      <ScrollReveal delay={0}>
        <CountUp target={500} suffix="+">
          <p class="stat-label">Students</p>
        </CountUp>
      </ScrollReveal>
      <ScrollReveal delay={100}>
        <CountUp target={19}>
          <p class="stat-label">Modules</p>
        </CountUp>
      </ScrollReveal>
      <ScrollReveal delay={200}>
        <CountUp target={1000} suffix="+">
          <p class="stat-label">Hours of Content</p>
        </CountUp>
      </ScrollReveal>
      <ScrollReveal delay={300}>
        <div class="nni-certified-stat">
          <span class="nni-certified-text">NNI</span>
          <p class="stat-label">Certified</p>
        </div>
      </ScrollReveal>
    </div>
  </Section>

  <!-- 3. Learning Paths -->
  <Section
    title="Choose Your Learning Path"
    subtitle="Whether you're brand new or ready for advanced strategies, we have a path for you."
  >
    <ScrollReveal>
      <div class="cards-grid">
        <Card
          title="Foundations"
          description="Start here if you're new to IBC concepts. Build a solid understanding of the banking function and why it matters."
          href="/learn/start-here"
          badge="Beginner"
        >
          <div slot="image" class="card-meta">
            <span class="card-lesson-count">8 Lessons</span>
          </div>
        </Card>
        <Card
          title="Mechanics"
          description="How the policy actually works under the hood. Understand premiums, dividends, and policy loans."
          href="/learn/start-here"
          badge="Intermediate"
        >
          <div slot="image" class="card-meta">
            <span class="card-lesson-count">6 Lessons</span>
          </div>
        </Card>
        <Card
          title="Advanced Strategies"
          description="Family banking, business applications, and multi-generational wealth strategies."
          href="/learn/start-here"
          badge="Advanced"
        >
          <div slot="image" class="card-meta">
            <span class="card-lesson-count">5 Lessons</span>
          </div>
        </Card>
      </div>
    </ScrollReveal>
  </Section>

  <!-- 4. What is IBC? Explainer -->
  <Section background="cream" id="what-is-ibc">
    <ScrollReveal>
      <SplitContent
        title="What Is the Infinite Banking Concept?"
        description="The Infinite Banking Concept is a process — not a product. It's a way of recapturing the banking function in your life so that you finance your own purchases, keep the interest, and build wealth that compounds for generations. Created by Nelson Nash and outlined in his book Becoming Your Own Banker, IBC uses dividend-paying whole life insurance as the foundation for a personal banking system."
        ctaText="Read the Full Guide"
        ctaHref="/learn/start-here"
        imageSrc="/images/byob-book-cover.jpg"
        imageAlt="Becoming Your Own Banker book cover"
      />
    </ScrollReveal>
  </Section>

  <!-- 5. Featured Blog Posts -->
  <Section
    title="Latest from the Blog"
  >
    <ScrollReveal>
      <div class="cards-grid">
        <Card
          title="What Is the Infinite Banking Concept?"
          description="A comprehensive introduction to IBC and how it can transform the way you think about money and banking."
          href="/blog"
        />
        <Card
          title="5 Myths About Whole Life Insurance"
          description="Debunking the most common misconceptions that keep people from understanding how whole life insurance really works."
          href="/blog"
        />
        <Card
          title="The Banking Function Explained"
          description="Understanding how money flows through your life and why recapturing the banking function matters for building wealth."
          href="/blog"
        />
      </div>
    </ScrollReveal>
  </Section>

  <!-- 6. Lead Magnet CTA -->
  <CTABanner
    heading="Download the Free IBC Starter Guide"
    description="Everything you need to know before you read the book. Get the essential concepts, key terms, and a clear roadmap for your IBC journey."
    buttonText="Get the Free Guide"
    buttonHref="/newsletter"
    variant="gold"
  />

  <!-- 7. Interactive Tools Preview -->
  <Section
    title="See What IBC Can Do for You"
    subtitle="Explore our free interactive tools to visualize the power of the Infinite Banking Concept."
  >
    <ScrollReveal>
      <div class="cards-grid cards-grid-2">
        <Card
          title="Interest Bleed Calculator"
          description="Discover how much money you're losing by financing through traditional banks. See the true cost of outsourcing your banking function."
          href="/tools"
        />
        <Card
          title="Family Bank Projector"
          description="Model the long-term impact of a family banking system. See how wealth compounds across generations when you become your own banker."
          href="/tools"
        />
      </div>
    </ScrollReveal>
  </Section>

  <!-- 8. Skool Classroom CTA -->
  <CTABanner
    heading="Ready to Go Deeper?"
    description="Join 500+ students in the free IBC Academy classroom on Skool. 19 structured modules, community discussion, and weekly office hours."
    buttonText="Join the Classroom"
    buttonHref="https://skool.com/ibc-academy"
    variant="navy"
  />

  <!-- 9. Organization Schema -->
  <script type="application/ld+json" set:html={JSON.stringify(generateOrganizationSchema())} />
</PageLayout>

<style>
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
    text-align: center;
  }

  @media (min-width: 768px) {
    .stats-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .stat-label {
    font-family: 'Inter', sans-serif;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-secondary, #5A6B8A);
    margin: 0.5rem 0 0;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .nni-certified-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .nni-certified-text {
    font-family: 'Playfair Display', serif;
    font-size: 2.25rem;
    font-weight: 700;
    line-height: 1.2;
    color: var(--color-navy, #1B2A4A);
  }

  .cards-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .cards-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .cards-grid-2 {
    max-width: 800px;
    margin: 0 auto;
  }

  @media (min-width: 768px) {
    .cards-grid-2 {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .card-meta {
    padding: 1rem 1.5rem 0;
  }

  .card-lesson-count {
    font-family: 'Inter', sans-serif;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-secondary, #5A6B8A);
  }
</style>
